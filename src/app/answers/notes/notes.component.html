<ng-container *ngIf="notes.length; else noNotes">
  <div class="c-notes-columns">
    <div *ngFor="let column of columns" class="c-notes-column">
      {{ column.name }}
    </div>
  </div>
  
  <div class="c-notes-rows">
    <div (click)="onRowClicked(note)" *ngFor="let note of notes" class="c-notes-row">
      <div class="c-notes-row__form-details">
        <ng-container *ngIf="note.hasCorrespondingQuestion">
          <div>{{ note.tabName }}</div>
          <div><u (click)="onQuestionLinkClicked($event, note)">{{ note.questionCode }}</u></div>
        </ng-container>
  
        <ng-container *ngIf="!note.hasCorrespondingQuestion">
          <!-- TODO: what message here? -->
          /
        </ng-container>
      </div>
  
      <div class="c-notes-row__flagged-status">
        <svg *ngIf="note.isQuestionFlagged" width="18" height="13" viewBox="0 0 18 13" fill="none"
          xmlns="http://www.w3.org/2000/svg">
          <path d="M17 1L6 12L1 7" stroke="#5F288D" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
        </svg>
      </div>
  
      <div class="c-notes-row__note-content">
        {{ note.text }}
        <!-- TODO: attachment -->
      </div>
    </div>
  </div>
</ng-container>

<ng-template #noNotes>
  <!-- TODO: translation -->
  <p class="c-notes-empty-rows">There are any notes created.</p>
</ng-template>

<ng-template #modalContent let-activeModal>
  <div class="c-notes-modal">
    <!-- This is needed because, by default, it will focus on the first `focusable` -->
    <!-- element, which in this case is the button placed at the end -->
    <!-- Without this `hack`, the modal will always be scrolled to that button -->
    <input type="text" style="display:none" />

    <div class="c-notes-modal__header">
      <h4>{{ crtClickedNote.questionCode }} Note</h4>
    </div>
    
    <div class="c-notes-modal__content">
      <p>{{ crtClickedNote.text }}</p>

      <div
        class="c-notes-modal__image-container"
        *ngFor="let attachment of crtClickedNote.attachmentsPaths"
      >
        <img *ngIf="attachment.isImage" [src]="attachment.src">
      </div>

      <app-base-button 
        (click)="activeModal.close()" 
        [disabled]="false" 
        [variant]="BaseButtonVariants.PURPLE"
        [custom-styles]="{ fontSize: '1rem', padding: '0.3rem 0.5rem', border: 'none' }"
        class="c-notes-modal__close-button"
      >
        <!-- TODO: translation -->
        Close
      </app-base-button>
    </div>
  </div>
</ng-template>